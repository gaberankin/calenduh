/*! jquery.calenduh 0.1.0 -  Gabe Rankin - 2014-06-17 */
(function(){var a,b;b=new Date,a=function(){function a(a){this.opts=$.extend(!0,this.opts,a),null!==this.opts.date&&this.setDate(this.opts.date,!1),"string"==typeof this.opts.target?this.opts.target=$(this.opts.target):"object"==typeof this.opts.target&&this.opts.target instanceof jQuery||(this.opts.target=null),null===this.opts.prevDayTemplate&&(this.opts.prevDayTemplate=this.opts.dayTemplate),null===this.opts.nextDayTemplate&&(this.opts.nextDayTemplate=this.opts.dayTemplate),this.render()}return a.prototype.opts={month:b.getMonth(),year:b.getFullYear(),date:null,renderPrevNext:!0,maxDate:null,minDate:null,availableClass:"available",unavailableClass:"unavailable",target:null,dayTemplate:'<span class="day">{day}</span>',prevDayTemplate:null,nextDayTemplate:null},a.prototype.setDate=function(a,b){return null==b&&(b=!0),a instanceof Date&&(this.opts.month=a.getMonth(),this.opts.year=a.getFullYear()),b?this.render():void 0},a.prototype.getDate=function(){return new Date(this.opts.year,this.opts.month,1)},a.prototype.getMonth=function(){return new Date(this.opts.year,this.opts.month,1).getMonth()},a.prototype.getYear=function(){return new Date(this.opts.year,this.opts.month,1).getFullYear()},a.prototype.render=function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v;if(m=new Date(this.opts.year,this.opts.month,1,0,0,0,0),h=new Date(this.opts.year,this.opts.month+1,1,0,0,0,0),n=new Date(m-1e3),e='<ul class="calenduh calenduh-cf">',6!==n.getDay())for(q=n.getMonth(),r=n.getFullYear(),o=n.getDate(),p=o-n.getDay(),s=0,c=t=p;o>=p?o>=t:t>=o;c=o>=p?++t:--t)e+='<li class="day-item prev-month day-'+s+'" data-year="'+r+'" data-month="'+q+'" data-day="'+c+'">',this.opts.renderPrevNext&&(e+=this.opts.prevDayTemplate.replace(/{day}/g,c)),e+="</li>",s++;for(g=1,f=new Date(h-1e3).getDate(),d=new Date(this.opts.year,this.opts.month,1,0,0,0),a=d.getMonth(),b=d.getFullYear(),c=u=g;f>=g?f>=u:u>=f;c=f>=g?++u:--u)d=new Date(this.opts.year,this.opts.month,c,0,0,0),s=d.getDay(),e+='<li class="day-item current-month day-'+s+'" data-year="'+b+'" data-month="'+a+'" data-day="'+c+'">'+this.opts.dayTemplate.replace(/{day}/g,c)+"</li>";if(6!==s)for(k=h.getMonth(),l=h.getFullYear(),j=1,i=6-s,c=v=j;i>=j?i>=v:v>=i;c=i>=j?++v:--v)e+='<li class="day-item next-month day-'+s+'" data-year="'+l+'" data-month="'+k+'" data-day="'+c+'">',this.opts.renderPrevNext&&(e+=this.opts.nextDayTemplate.replace(/{day}/g,c)),e+="</li>",s++;return null===this.opts.target?e:void this.opts.target.html(e)},a}(),function(b){b.fn.calenduh=function(c){return this.each(function(){var d,e,f,g,h,i;return g=b(this),h=this,e=b('<div class="calenduh-container"></div>').appendTo(g),f=b('<div class="calenduh-controls calenduh-cf">\n	<a class="prev-month">prev</a>\n	<a class="next-month">next</a>\n</div>').appendTo(e),d=b('<div class="calenduh-calendar"></div>').appendTo(e),c.target=d,this.c=new a(c),i=null,d.on("mouseenter",".day-item",function(){var a,c,d,e;a=b(this),a.addClass("over-day"),e=a.attr("data-year"),d=a.attr("data-month"),c=a.attr("data-day"),g.trigger("calenduh.mouseenterday",[new Date(e,d,c)])}).on("mouseleave",".day-item",function(){var a,c,d,e;a=b(this),a.removeClass("over-day"),e=a.attr("data-year"),d=a.attr("data-month"),c=a.attr("data-day"),g.trigger("calenduh.mouseleaveday",[new Date(e,d,c)])}).on("click",".day-item",function(){var a,c,e,f,h,j;return a=b(this),a.hasClass("current-day")?void 0:(j=a.attr("data-year"),h=a.attr("data-month"),f=a.attr("data-day"),i=new Date(j,h,f),e=[i,null],c=b(".current-day",d),c.size()>0&&(j=c.attr("data-year"),h=c.attr("data-month"),f=c.attr("data-day"),e[1]=new Date(j,h,f)),c.removeClass("current-day"),a.addClass("current-day"),g.trigger("calenduh.selectday",e))}),f.on("click",".next-month",function(){var a;return a=h.c.getDate(),h.c.setDate(new Date(a.getFullYear(),a.getMonth()+1,1)),null!==i&&b("li[data-year="+i.getFullYear()+"][data-month="+i.getMonth()+"][data-day="+i.getDate()+"]",d).addClass("current-day"),g.trigger("calenduh.nextmonth",[h.c.getDate()])}).on("click",".prev-month",function(){var a;return a=h.c.getDate(),h.c.setDate(new Date(a.getFullYear(),a.getMonth()-1,1)),null!==i&&b("li[data-year="+i.getFullYear()+"][data-month="+i.getMonth()+"][data-day="+i.getDate()+"]",d).addClass("current-day"),g.trigger("calenduh.prevmonth",[h.c.getDate()])})})}}(jQuery)}).call(this);